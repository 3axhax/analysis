@import "tailwindcss";

@font-face {
  font-family: "Sofia Sans";
  src: url("./fonts/SofiaSans_v.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Sofia Sans";
  src: url("./fonts/SofiaSans-Italic_v.woff2") format("woff2");
  font-weight: 100 900;
  font-style: italic;
  font-display: swap;
}

@layer base {

  :root {
    font-family: "Sofia Sans", "Roboto", "Arial Black", sans-serif;
    font-weight: 300;
    line-height: 1.5;
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%;
    --accent: black;
    --canvas: color-mix(in lch, canvas, canvasText 1%);
    --border: color-mix(in lch, canvas, canvasText 10%);
    --text: color-mix(in lch, canvasText, canvas 25%);
    --border-radius: 24;
    --border-width: 3;
    --trail-size: 25;
    --speed: 12s;
    --size: 45px;
    --line: color-mix(in lch, canvasText, transparent 70%);
    --header-height: 2.5rem;

    --secondaryColor: var(--color-green-800);
  }

  @media (min-width: theme(--breakpoint-lg)) {
    :root {
      --header-height: 4.75rem;
    }
  }

  @media (prefers-color-scheme: dark) {
    :root:not(.light) {
      --accent: white;
      --canvas: color-mix(in lch, canvas, canvasText 100%);
      --border: color-mix(in lch, canvas, canvasText 75%);
    }
  }

  /* Manual override with .dark class */
  :root.dark {
    --accent: white;
    --canvas: color-mix(in lch, canvas, canvasText 100%);
    --border: color-mix(in lch, canvas, canvasText 75%);
  }

  body {
    font-family: "Sofia Sans", "Roboto", "Arial Black", sans-serif;
    @apply m-0 flex items-stretch justify-center min-w-[320px] min-h-screen bg-white dark:bg-gray-950;
    /*    background: linear-gradient(90deg, var(--line) 1px, transparent 1px var(--size)) 50% 50% / var(--size) var(--size), linear-gradient(var(--line) 1px, transparent 1px var(--size)) 50% 50% / var(--size) var(--size);
    -webkit-mask: linear-gradient(-20deg, transparent 50%, white);*/
  }

  #root {
    @apply mx-auto text-center w-full;
  }

  /* Global smooth scrolling */
  html {
    scroll-behavior: smooth;
    scroll-padding-top: calc(var(--header-height) + 2rem);
  }

  /* Disable smooth scroll for performance */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }
}

@layer utilities {
  /* Кастомные классы для точного контроля variable font */
  .font-sofia-variable {
    font-family: "Sofia Sans", sans-serif;
    font-variation-settings:
      "wght" 400,
      "wdth" 100;
  }

  .font-weight-350 {
    font-variation-settings: "wght" 350;
  }

  .font-weight-450 {
    font-variation-settings: "wght" 450;
  }

  .font-width-110 {
    font-variation-settings: "wdth" 110;
  }

  /* Плавные переходы для variable font */
  .font-transition {
    transition: font-variation-settings 0.3s ease;
  }
}

@layer components {
  .app {
    @apply flex flex-col items-center dark:text-white px-6;
  }

  .logo__text {
    @apply flex flex-col items-start text-green-800;
  }

  .counter {
    @apply flex flex-col items-center gap-4 p-8 border border-gray-200 rounded-xl bg-white/5 backdrop-blur-sm;
  }

  .counter h2 {
    @apply m-0 text-3xl font-bold text-blue-600;
  }

  .counter-controls {
    @apply flex gap-4 flex-wrap justify-center;
  }

  .header {
    @apply w-full bg-white/95 dark:bg-gray-950/95 shadow-sm dark:shadow-white/20 py-4 px-6 mb-8 sticky top-0 flex items-center justify-start z-10 relative;
  }

  .form-control {
    font-family: "Sofia Sans", "Roboto", "Arial Black", sans-serif;
    @apply text-green-800 w-full px-5 py-3 border border-green-800 bg-white text-base/5 rounded-md shadow-sm hover:shadow-green-900 focus:outline-none focus:border-green-900 focus:shadow-gray-400;
  }

  .form-label {
    font-family: "Sofia Sans", "Roboto", "Arial Black", sans-serif;
    @apply absolute top-3 left-4 bg-white text-base/5 rounded-xs text-green-800 transition-all duration-300 ease-in-out py-0.25 px-1;
  }

  .form-control:focus + .form-label,
  .form-control:not(:placeholder-shown) + .form-label {
    @apply -top-3 text-xs/5;
  }

  .form-control:-webkit-autofill,
  .form-control:-webkit-autofill:hover,
  .form-control:-webkit-autofill:focus,
  .form-control:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px white inset !important;
    -webkit-text-fill-color: var(--color-green-800) !important;
    transition: background-color 5000s ease-in-out 0s;
  }

  .form-control:-webkit-autofill + .form-label,
  .form-control:-webkit-autofill:hover + .form-label,
  .form-control:-webkit-autofill:focus + .form-label,
  .form-control:-webkit-autofill:active + .form-label {
    @apply -top-3 text-xs/5;
  }

  .page-title {
    font-family: "Sofia Sans", "Roboto", "Arial Black", sans-serif;
    @apply text-4xl text-gray-900 dark:text-white mb-4;
  }

  .btn {
    @apply relative overflow-hidden text-white text-lg/5 transition-all duration-400 font-medium rounded-md px-5 py-4 cursor-pointer
    bg-gradient-to-r
    from-green-800
    via-green-500
    to-green-800
    bg-[length:300%_100%]
    hover:bg-right-top
    disabled:cursor-not-allowed
    disabled:bg-blue-300
    shadow-md shadow-green-800/75
    hover:shadow-gray-500;
  }

  .btn-white {
    @apply relative overflow-hidden text-green-800 text-lg/5 transition-all duration-400 font-medium rounded-md px-5 py-4 cursor-pointer
    shadow-md
    bg-white
    hover:shadow-gray-500
    hover:text-green-950
    disabled:cursor-not-allowed
    disabled:bg-blue-300
    outline outline-1 outline-offset-[-1px] outline-green-800;
  }

  .b-border {
    position: absolute;
    inset: 0;
    clip-path: inset(0 0 0 0 round calc(var(--border-radius) * 1px));
    border-radius: calc(var(--border-radius) * 1px);
    background: var(--border);
    z-index: -1;
    border: 0;
    container-type: inline-size;
    transition:
      clip-path var(1s),
      -webkit-clip-path var(1s);
  }

  .line-between + .line-between {
    @apply border-t border-gray-200 pt-1;
  }

  .trail {
    width: calc(var(--trail-size) * 1cqmin);
    aspect-ratio: 2 / 1;
    position: absolute;
    background: radial-gradient(
      100% 100% at right,
      var(--accent, red),
      transparent 50%
    );
    offset-path: border-box;
    offset-anchor: 100% 50%;
    animation: journey var(--speed, 6s) infinite linear;
  }

  @keyframes journey {
    to {
      offset-distance: 100%;
    }
  }

  .b-border__content {
    background:
      linear-gradient(var(--canvas), var(--canvas)) padding-box,
      transparent;
    border: calc(var(--border-width) * 1px) solid transparent;
    border-radius: calc(var(--border-radius) * 1px);
    padding: clamp(1rem, 3vmin + 1rem, 6rem);
  }

  .radio-input {
    @apply relative mr-1 cursor-pointer;
  }

  .radio-input:before {
    @apply w-3 h-3 absolute top-0.5 left-0.5 rounded-full z-1 bg-green-800 content-[''] transform scale-0   transition-transform duration-400 ease-[cubic-bezier(.45,1.8,.5,.75)];
  }

  .radio-label {
    @apply relative;
  }
  .radio-input:checked:before {
    @apply transform scale-100;
  }
  .radio-input:after {
    @apply w-5 h-5 absolute -top-0.5 -left-0.5 rounded-full content-[''] bg-white dark:bg-black border-2 border-green-800;
  }
}

.font-sans {
  font-family: "Sofia Sans", sans-serif;
}
